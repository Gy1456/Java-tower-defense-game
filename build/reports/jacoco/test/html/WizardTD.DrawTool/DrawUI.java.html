<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DrawUI.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">scaffold</a> &gt; <a href="index.source.html" class="el_package">WizardTD.DrawTool</a> &gt; <span class="el_source">DrawUI.java</span></div><h1>DrawUI.java</h1><pre class="source lang-java linenums">package WizardTD.DrawTool;

import WizardTD.Gamebase.GameSet;
import WizardTD.MODEL.Board;
import WizardTD.MODEL.Mana;
import WizardTD.UiObject.*;
import processing.core.PApplet;
import processing.core.PImage;

import java.util.HashMap;

public class DrawUI extends DrawTool{
    /**
     * UI for accelerating the game.
     */
    private UI accelerateUI;
    /**
     * UI for building towers.
     */
    private UI buidUI;
    /**
     * UI for upgrading tower damage.
     */
    private UI damageUI;

    /**
     * UI for managing the mana pool.
     */
    private UI manaUI;

    /**
     * UI for pausing the game.
     */
    private UI pauseUI;

    /**
     * UI for upgrading tower range.
     */
    private UI rangeUI;
    /**
     * UI for upgrading tower speed.
     */
    private UI speedUI;
    /**
     * The game settings that store game-related information.
     */
    private GameSet gameSet;
    /**
     * The mana management object for tracking mana resources.
     */
    private Mana mana;
    /**
     * The game board .
     */
    private Board board;
    /**
     * The constructor of DrawUI,Initializes a DrawUI object with UI elements, game set, mana, board, and image mappings.
     * @param accelerateUI The UI for game acceleration.
     * @param buidUI    The UI for tower building.
     * @param damageUI    The UI for tower damage upgrade.
     * @param manaUI      The UI for managing mana.
     * @param pauseUI     The UI for pausing the game.
     * @param rangeUI     The UI for tower range upgrade.
     * @param speedUI     The UI for tower speed upgrade.
     * @param gameSet     The game set containing game state information.
     * @param mana        The mana object for managing mana.
     * @param board       The game board.
     * @param maps        A HashMap of images used for rendering various elements.
     */
    public DrawUI(UI accelerateUI, UI buidUI, UI damageUI, UI manaUI, UI pauseUI, UI rangeUI, UI speedUI, GameSet gameSet,
                  Mana mana, Board board, HashMap&lt;String,PImage&gt; maps) {
<span class="fc" id="L72">        super(maps);</span>
<span class="fc" id="L73">        this.accelerateUI =accelerateUI;</span>
<span class="fc" id="L74">        this.buidUI = buidUI;</span>
<span class="fc" id="L75">        this.damageUI = damageUI;</span>
<span class="fc" id="L76">        this.manaUI = manaUI;</span>
<span class="fc" id="L77">        this.pauseUI = pauseUI;</span>
<span class="fc" id="L78">        this.rangeUI = rangeUI;</span>
<span class="fc" id="L79">        this.speedUI = speedUI;</span>
<span class="fc" id="L80">        this.gameSet=gameSet;</span>
<span class="fc" id="L81">        this.mana=mana;</span>
<span class="fc" id="L82">        this.board=board;</span>
<span class="fc" id="L83">    }</span>
    /**
     * Draws a UI element, including a rectangular background and text.
     * @param app1           The PApplet used for drawing.
     * @param ui             The UI element to be drawn.
     * @param textToDisplay  The main text to display on the UI element.
     * @param additionalText Additional text to display below the main text.
     * @param fillRect1      Whether to fill the main background rectangle.
     * @param fillRect2      Whether to fill the rectangle for additional text.
     * @param c1             The red color component for the main rectangle (0-255).
     * @param c2             The green color component for the main rectangle (0-255).
     * @param c3             The blue color component for the main rectangle (0-255).
     * @param c4             The red color component for the additional text rectangle (0-255).
     * @param c5             The green color component for the additional text rectangle (0-255).
     * @param c6             The blue color component for the additional text rectangle (0-255).
     */
    public void drawUI(PApplet app1, UI ui, String textToDisplay, String additionalText, boolean fillRect1,
                       boolean fillRect2, int c1,int c2,int c3,int c4,int c5,int c6) {
<span class="fc" id="L101">        float originalStrokeWeight = app1.g.strokeWeight;</span>
<span class="fc" id="L102">        int originalFillColor = app1.g.fillColor;</span>
<span class="fc" id="L103">        app1.noStroke();</span>
<span class="fc" id="L104">        app1.noFill();</span>
<span class="fc bfc" id="L105" title="All 2 branches covered.">        if(fillRect2) {</span>
<span class="fc" id="L106">            app1.fill(c1, c2, c3);</span>
        }
<span class="fc bfc" id="L108" title="All 2 branches covered.">        if (fillRect1) {</span>
<span class="fc" id="L109">            app1.fill(c4,c5,c6);</span>
        }
<span class="fc" id="L111">        float x = ui.getx();</span>
<span class="fc" id="L112">        float y = ui.gety();</span>
<span class="fc" id="L113">        float rectWidth = ui.getwidth();</span>
<span class="fc" id="L114">        float rectHeight = ui.getwidth();</span>
<span class="fc" id="L115">        app1.stroke(0);</span>
<span class="fc" id="L116">        app1.strokeWeight(2);</span>
<span class="fc" id="L117">        app1.rect(x, y, rectWidth, rectHeight);</span>
<span class="fc" id="L118">        app1.fill(0);</span>
<span class="fc" id="L119">        app1.textSize(30);</span>
<span class="fc" id="L120">        float textWidth = app1.textWidth(textToDisplay);</span>
<span class="fc" id="L121">        float textHeight = app1.textAscent() + app1.textDescent();</span>
<span class="fc" id="L122">        float textX = x + (rectWidth - textWidth) / 2;</span>
<span class="fc" id="L123">        float textY = y + (rectHeight + textHeight) / 2;</span>
<span class="fc" id="L124">        app1.text(textToDisplay, textX, textY);</span>
<span class="fc" id="L125">        app1.fill(0);</span>
<span class="fc" id="L126">        app1.textSize(12);</span>
<span class="fc" id="L127">        float textHeight2 = app1.textAscent() + app1.textDescent();</span>
<span class="fc" id="L128">        float textX2 = x + rectWidth + 5;</span>
<span class="fc" id="L129">        float textY2 = y + (rectHeight + textHeight2) / 5;</span>
<span class="fc" id="L130">        app1.text(additionalText, textX2, textY2);</span>
<span class="fc" id="L131">        app1.strokeWeight(originalStrokeWeight);</span>
<span class="fc" id="L132">        app1.fill(originalFillColor);</span>
<span class="fc" id="L133">    }</span>

    /**
     * Draws the cost label for the UI element, including a rectangular background and text.
     * @param app       The PApplet used for drawing.
     * @param fillRect  Whether to fill the background rectangle for the cost label.
     * @param ui        The UI element to attach the cost label to.
     * @param n The cost value to display on the label.
     */
    public void drawLabel(PApplet app,boolean fillRect,UI ui,int n){
<span class="fc bfc" id="L143" title="All 2 branches covered.">        if(fillRect){</span>
<span class="fc" id="L144">            float x = ui.getx()-70;</span>
<span class="fc" id="L145">            float y = ui.gety();</span>
<span class="fc" id="L146">            app.fill(255);</span>
<span class="fc" id="L147">            app.stroke(0);</span>
<span class="fc" id="L148">            app.rect(x, y, 60, 15);</span>
<span class="fc" id="L149">            app.fill(0);</span>
<span class="fc" id="L150">            app.textSize(15);</span>
<span class="fc" id="L151">            String costLabel = &quot;cost:&quot;+n;</span>
<span class="fc" id="L152">            app.text(costLabel, x+3, y+12);</span>
        }

<span class="fc" id="L155">    }</span>
    /**
     * Draws all UI elements on the screen.
     * @param app The PApplet used for drawing.
     */
    public void draw(PApplet app){
<span class="fc" id="L161">        drawUI(app,accelerateUI,&quot;FF&quot;,&quot;speedX2&quot;,gameSet.isGameaccelerate(),</span>
<span class="fc" id="L162">                accelerateUI.getcotain(),200,200,200, 255,255,0);</span>
<span class="fc" id="L163">        drawUI(app,pauseUI,&quot;P&quot;,&quot;pause&quot;,gameSet.isGamepause(),</span>
<span class="fc" id="L164">               pauseUI.getcotain(),200,200,200, 255,255,0);</span>
<span class="fc" id="L165">        drawUI(app,buidUI,&quot;T&quot;,&quot;build\ntower&quot;,board.getbuildenable(),</span>
<span class="fc" id="L166">                buidUI.getcotain(),200,200,200, 255,255,0);</span>
<span class="fc" id="L167">        drawUI(app,rangeUI,&quot;U1&quot;,&quot;Upgrade\nrange&quot;,board.getRangelevelupenable(),</span>
<span class="fc" id="L168">                rangeUI.getcotain(),200,200,200, 255,255,0);</span>
<span class="fc" id="L169">        drawUI(app,speedUI,&quot;U2&quot;,&quot;Upgrade\nspeed&quot;,board.getspeedlevelupenable(),</span>
<span class="fc" id="L170">                speedUI.getcotain(),200,200,200, 255,255,0);</span>
<span class="fc" id="L171">        drawUI(app,damageUI,&quot;U3&quot;,&quot;Upgrade\ndamage&quot;,board.getDamagelevelupenable(),</span>
<span class="fc" id="L172">                damageUI.getcotain(),200,200,200, 255,255,0);</span>
<span class="fc" id="L173">        drawUI(app,damageUI,&quot;U3&quot;,&quot;Upgrade\ndamage&quot;,board.getDamagelevelupenable(),</span>
<span class="fc" id="L174">                damageUI.getcotain(),200,200,200, 255,255,0);</span>
<span class="fc" id="L175">        drawUI(app,manaUI,&quot;M&quot;,&quot;Mana Pool\n&quot;+&quot;cost&quot;+</span>
<span class="fc" id="L176">                        (int)mana.getMana_pool_spell_initial_cost(),false, manaUI.getcotain()</span>
                ,200,200,200, 255,255,0);
<span class="fc" id="L178">        drawLabel(app,manaUI.getcotain(),manaUI,(int)mana.getMana_pool_spell_initial_cost());</span>
<span class="fc" id="L179">        drawLabel(app,buidUI.getcotain(),buidUI,100);</span>
<span class="fc" id="L180">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.9.202303310957</span></div></body></html>